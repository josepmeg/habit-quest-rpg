<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HabitQuest RPG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 md:p-8">

    <div id="notification" class="notification fixed top-5 right-5 bg-green-500 text-white p-4 rounded-lg shadow-lg opacity-0 transform translate-y-10 z-50"></div>

    <div id="main-content" class="max-w-7xl mx-auto space-y-8">
        <header class="card rounded-lg p-6">
            <div class="flex justify-center items-center mb-6 relative">
                <h1 class="font-rpg text-2xl md:text-4xl text-center text-yellow-400">HabitQuest RPG</h1>
                <button id="info-modal-btn" class="absolute right-0 btn bg-gray-700 hover:bg-gray-600 rounded-full p-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="grid grid-cols-3 items-start gap-4">
                <div id="player-card" class="text-center space-y-4">
                    <div class="relative inline-block">
                        <img src="assets/player.png" class="pixel-art w-[35vw] h-auto max-w-32 md:max-w-40">
                        <span id="player-level" class="absolute -bottom-2 -right-2 font-rpg text-lg bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center border-2 border-gray-800">1</span>
                        <button id="player-stats-modal-btn" class="absolute top-0 right-0 btn bg-gray-700 hover:bg-gray-600 rounded-full p-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm2 1v1h8V6H6z" clip-rule="evenodd"></path></svg></button>
                        <button id="inventory-modal-btn" class="absolute top-0 left-0 btn bg-gray-700 hover:bg-gray-600 rounded-full p-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v2a2 2 0 01-2 2H7a2 2 0 01-2-2V4z"></path><path fill-rule="evenodd" d="M3 8a3 3 0 013-3h8a3 3 0 013 3v6a3 3 0 01-3 3H6a3 3 0 01-3-3V8zm3-1a1 1 0 00-1 1v6a1 1 0 001 1h8a1 1 0 001-1V8a1 1 0 00-1-1H6z" clip-rule="evenodd"></path></svg></button>
                    </div>
                    <h2 class="font-rpg text-xl md:text-2xl text-blue-400">Player</h2>
                    <div class="space-y-2 px-2">
                        <div><span class="text-sm font-bold text-green-400">HP</span><div class="progress-bar-bg rounded-full"><div id="player-hp-bar" class="progress-bar-fill h-4 rounded-full hp-gradient"></div></div><span id="player-hp-text" class="text-xs"></span></div>
                        <div><span class="text-sm font-bold text-blue-400">MP</span><div class="progress-bar-bg rounded-full"><div id="player-mp-bar" class="progress-bar-fill h-4 rounded-full mp-gradient"></div></div><span id="player-mp-text" class="text-xs"></span></div>
                        <div><span class="text-sm font-bold text-purple-400">EXP</span><div class="progress-bar-bg rounded-full"><div id="player-exp-bar" class="progress-bar-fill h-4 rounded-full exp-gradient"></div></div><span id="player-exp-text" class="text-xs"></span></div>
                        <div class="flex items-center justify-center gap-2 pt-1"><svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 10.586 7.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3z"></path></svg><span id="player-luck-text" class="text-sm font-bold text-yellow-400"></span></div>
                    </div>
                </div>
                <div class="text-center pt-12"><span class="font-rpg text-4xl md:text-6xl text-red-500">VS</span></div>
                <div id="boss-card" class="text-center space-y-4">
                     <div class="relative inline-block">
                        <img src="assets/ifrit.png" class="pixel-art w-[35vw] h-auto max-w-32 md:max-w-40">
                        <button id="boss-modal-btn" class="absolute top-0 right-0 btn bg-gray-700 hover:bg-gray-600 rounded-full p-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M2 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 6a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zm0 6a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1z"></path></svg></button>
                    </div>
                    <h2 id="boss-name" class="font-rpg text-xl md:text-2xl text-red-500"></h2>
                    <div class="space-y-2 px-2">
                        <div><span class="text-sm font-bold text-red-400">HP</span><div class="progress-bar-bg rounded-full"><div id="boss-hp-bar" class="progress-bar-fill h-6 rounded-full bg-red-600"></div></div><span id="boss-hp-text" class="text-xs"></span></div>
                    </div>
                </div>
            </div>
        </header>

        <main class="space-y-6">
            <section class="card rounded-lg p-4"><button id="workout-toggle" class="w-full text-left"><h3 class="font-rpg text-lg text-yellow-400 flex justify-between items-center"><span>Work Out Log <span id="workout-counter" class="text-sm"></span></span><span id="workout-arrow">▼</span></h3></button><div id="workout-content" class="collapsible-content mt-4 space-y-3"></div></section>
            <section class="card rounded-lg p-4"><button id="habits-toggle" class="w-full text-left"><h3 class="font-rpg text-lg text-green-400 flex justify-between items-center"><span>Daily Habits <span id="habits-counter" class="text-sm"></span></span><span id="habits-arrow">▼</span></h3></button><div id="daily-habits-content" class="collapsible-content mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div></section>
            <section class="card rounded-lg p-4"><button id="quests-toggle" class="w-full text-left"><h3 class="font-rpg text-lg text-purple-400 flex justify-between items-center"><span>Quest Board</span><span id="quests-arrow">▼</span></h3></button><div id="quests-content" class="collapsible-content mt-4 space-y-3"></div></section>
            <section class="text-center space-y-4">
                <div class="flex justify-center items-center gap-4">
                    <button id="attack-btn" class="attack-btn btn font-rpg text-xl bg-red-600 text-white py-4 px-8 rounded-lg shadow-lg hover:bg-red-700 disabled:bg-gray-500 disabled:cursor-not-allowed disabled:shadow-none">ATTACK!</button>
                    <button id="special-attack-btn" class="special-attack-btn btn font-rpg text-xl bg-indigo-600 text-white py-4 px-8 rounded-lg shadow-lg hover:bg-indigo-700 disabled:bg-gray-500 disabled:cursor-not-allowed disabled:shadow-none">FIREBALL</button>
                </div>
                <div>
                    <p id="attack-message" class="text-sm text-gray-400 mt-2 h-4"></p>
                    <p id="special-attack-message" class="text-sm text-gray-400 mt-2 h-4"></p>
                </div>
            </section>
        </main>
        
        <footer class="text-center text-gray-500 text-xs mt-8"><p>Game data is saved locally in your browser.</p></footer>
    </div>

    <div id="boss-modal" class="modal fixed inset-0 z-40 items-center justify-center hidden"><div class="modal-overlay fixed inset-0"></div><div class="modal-content card rounded-lg p-6 w-full max-w-md m-4 relative"><h3 class="font-rpg text-xl text-yellow-400 mb-4">Boss Management</h3><button id="boss-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button><div class="space-y-4"><div><h4 class="font-semibold mb-2">Add New Boss</h4><form id="add-boss-form" class="grid grid-cols-2 gap-2"><input id="new-boss-name" type="text" placeholder="Boss Name" class="task-input col-span-2 rounded-md p-2" required><input id="new-boss-hp" type="number" placeholder="HP" class="task-input rounded-md p-2" required><input id="new-boss-ability" type="text" placeholder="Ability (e.g., Burn)" class="task-input rounded-md p-2"><button type="submit" class="col-span-2 btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md">Add</button></form></div><div><h4 class="font-semibold mb-2">Upcoming Bosses</h4><ul id="boss-queue-list" class="space-y-2 max-h-40 overflow-y-auto"></ul></div><div><h4 class="font-semibold mb-2">Defeated Bosses</h4><ul id="defeated-boss-list" class="space-y-2 max-h-40 overflow-y-auto"></ul></div></div></div></div>
    <div id="info-modal" class="modal fixed inset-0 z-40 items-center justify-center hidden"><div class="modal-overlay fixed inset-0"></div><div class="modal-content card rounded-lg p-6 w-full max-w-md m-4 relative"><h3 class="font-rpg text-xl text-blue-400 mb-4">How It Works</h3><button id="info-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button><div class="space-y-4 text-gray-300"><div><h4 class="font-semibold text-yellow-400">Damage Calculation</h4><p>Your damage is your base <span class="font-bold">Attack</span> stat multiplied by a streak bonus. The bonus is <span class="font-mono text-sm bg-gray-700 px-1 rounded">1 + (0.1 * (Streak - 1))</span>.</p></div><div><h4 class="font-semibold text-indigo-400">Special Attack</h4><p>Fireball costs <span class="font-bold">20 MP</span> and deals <span class="font-bold">2.5x</span> your normal attack damage.</p></div><div><h4 class="font-semibold text-yellow-400">Luck & Critical Hits</h4><p>Your <span class="font-bold">Luck</span> stat gives you a chance to land a CRITICAL HIT for <span class="font-bold">2x damage!</span> Your base Luck increases as you level up, and you gain <span class="font-bold">+1 Luck</span> for every 3 days in your training streak.</p></div><div><h4 class="font-semibold text-yellow-400">Leveling Up</h4><p>When the EXP bar fills, you level up! Your stats increase permanently, and you are fully healed.</p></div></div></div></div>
    <div id="player-stats-modal" class="modal fixed inset-0 z-40 items-center justify-center hidden"><div class="modal-overlay fixed inset-0"></div><div class="modal-content card rounded-lg p-6 w-full max-w-2xl m-4 relative"><h3 class="font-rpg text-xl text-blue-400 mb-4">Player Stats & History</h3><button id="player-stats-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button><div id="history-content" class="space-y-4 text-gray-300 max-h-[70vh] overflow-y-auto"></div></div></div>
    <div id="inventory-modal" class="modal fixed inset-0 z-40 items-center justify-center hidden"><div class="modal-overlay fixed inset-0"></div><div class="modal-content card rounded-lg p-6 w-full max-w-md m-4 relative"><h3 class="font-rpg text-xl text-blue-400 mb-4">Inventory</h3><button id="inventory-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button><div id="inventory-content" class="space-y-2 text-gray-300 max-h-[70vh] overflow-y-auto"></div></div></div>

    <script src="script.js" defer></script>
</body>
</html>
